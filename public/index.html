<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>react-scheduler</title>
    <style>
        h3 small { font-weight: normal }
        
        #root {
            position: absolute;
            top: 10%;
            left: 5%;
            width: 90%;
        }
    </style>
    <script crossorigin src="./index.js"></script>
  </head>
  <body>
      <h3>react-scheduler <small>(github : <a href="https://github.com/mormat/react-scheduler">https://github.com/mormat/react-scheduler</a>)</small></h3>
      <div id="root">
          If nothing appeared here then maybe something went wrong
      </div>
      <button onclick="onReady()">reset</button>
      <script>
          
        function onReady() {
            
            console.log("reset");
            
            var urlParams = new URLSearchParams(window.location.search);

            switch (urlParams.get('action') || 'show_scheduler') {

                case 'admin':

                    mormat_scheduler.bindEventsManager(
                        document.getElementById('root'), 
                        {
                            events: buildSomeEvents(),
                            onEventCreate: function() {},
                            onEventUpdate: function() {},
                            onEventDelete: function() {}
                        }
                    );

                    break;

                case 'show_scheduler':

                    mormat_scheduler.bindScheduler(
                        document.getElementById('root'), 
                        {
                            enableOverlapping: true,
                            minHour: 8,
                            maxHour: 20,
                            defaultViewMode: 'week', 
                            events: buildSomeEvents()
                        }
                    );

                    break;

            } 
            
        }
          
        document.addEventListener("DOMContentLoaded", onReady);
          
        function buildSomeEvents() {

            var date  = new Date(Date.now());

            var diff  = date.getDate() - date.getDay() + (date.getDay() == 0 ? -6:1);
            var start = new Date( date.setDate(diff) ).getTime();
            var interval = 24 * 60 * 60 * 1000;

            const days = [];
            for (i = 0; i < 31; i++) {
                days.push(new Date(start + i * interval).toISOString().substring(0, 10));
            }

            return [
                {
                    label: "Conference",
                    start: days[1] + ' 14:00',
                    end:   days[1] + ' 18:00',
                },
                {
                    label: "Meeting",
                    start: days[3] + " 10:00",
                    end:   days[3] + " 18:00",
                    color: "white",
                    bgColor: "#9575cd"
                },
                {
                    label: "Exhibition",
                    start: days[5] + " 10:00",
                    end:   days[5] + " 16:00",
                    color: "white",
                    bgColor: "#0fc4a7"
                },
                {
                    label: "Training course (1)",
                    start: days[1] + " 10:00",
                    end:   days[7] + " 18:00",
                    color: "white",
                    bgColor: "#0fc4a7"
                },
                {
                    label: "Training course (2)",
                    start: days[2] + " 10:00",
                    end:    "2023-11-28 18:00",
                    color: "white",
                    bgColor: "#0fc4a7"
                },
                {   label: "Next month event",
                    start: days[17] + " 10:00",
                    end:   days[17] + " 10:00",
                    color: "white",
                    backgroundColor: "#0fc4a7"
                }   
            ]

        }
          
      </script>
  </body>
</html>
